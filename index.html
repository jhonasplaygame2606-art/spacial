<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Mini Explorador Espacial</title>
  <style>
    body { margin: 0; overflow: hidden; background: black; }
    #info {
      position: absolute; top: 10px; left: 10px;
      color: white; font-family: monospace;
      background: rgba(0,0,0,0.5); padding: 10px;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <div id="info">
    Use W A S D para mover, mouse para olhar ao redor.
  </div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/controls/PointerLockControls.js"></script>

  <script>
    // Setup básico da cena
    const scene = new THREE.Scene();

    // Criar câmera
    const camera = new THREE.PerspectiveCamera(
      75, window.innerWidth/window.innerHeight, 0.1, 1000
    );
    camera.position.set(0, 2, 5);

    // Renderer
    const renderer = new THREE.WebGLRenderer({antialias: true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Luz
    const light = new THREE.DirectionalLight(0xffffff, 1);
    light.position.set(1,1,1);
    scene.add(light);

    // Chão (simula planeta)
    const groundGeometry = new THREE.SphereGeometry(50, 32, 32);
    const groundMaterial = new THREE.MeshPhongMaterial({color: 0x004488, wireframe: false});
    const ground = new THREE.Mesh(groundGeometry, groundMaterial);
    ground.position.set(0, -50, 0);
    scene.add(ground);

    // Criar "nave" simples como cubo
    const shipGeometry = new THREE.BoxGeometry(1,0.5,2);
    const shipMaterial = new THREE.MeshPhongMaterial({color: 0x00ff00});
    const ship = new THREE.Mesh(shipGeometry, shipMaterial);
    ship.position.set(0, 2, 0);
    scene.add(ship);

    // Estrelas de fundo (pontos brancos)
    function createStar() {
      const geometry = new THREE.SphereGeometry(0.1, 8, 8);
      const material = new THREE.MeshBasicMaterial({color: 0xffffff});
      const star = new THREE.Mesh(geometry, material);
      star.position.set(
        (Math.random()-0.5)*200,
        (Math.random()-0.5)*200,
        (Math.random()-0.5)*200
      );
      scene.add(star);
    }
    for(let i=0; i<200; i++) createStar();

    // Controles de câmera estilo FPS
    const controls = new THREE.PointerLockControls(camera, document.body);

    document.body.addEventListener('click', () => {
      controls.lock();
    });

    // Variáveis para movimento
    const move = {
      forward: false,
      backward: false,
      left: false,
      right: false
    };
    const velocity = new THREE.Vector3();

    // Capturar teclas
    document.addEventListener('keydown', (e) => {
      switch(e.code){
        case 'KeyW': move.forward = true; break;
        case 'KeyS': move.backward = true; break;
        case 'KeyA': move.left = true; break;
        case 'KeyD': move.right = true; break;
      }
    });
    document.addEventListener('keyup', (e) => {
      switch(e.code){
        case 'KeyW': move.forward = false; break;
        case 'KeyS': move.backward = false; break;
        case 'KeyA': move.left = false; break;
        case 'KeyD': move.right = false; break;
      }
    });

    // Loop de animação
    const clock = new THREE.Clock();

    function animate() {
      requestAnimationFrame(animate);

      const delta = clock.getDelta();
      const speed = 10;

      // Movimento
      velocity.x -= velocity.x * 10.0 * delta;
      velocity.z -= velocity.z * 10.0 * delta;

      if(move.forward) velocity.z -= speed * delta;
      if(move.backward) velocity.z += speed * delta;
      if(move.left) velocity.x -= speed * delta;
      if(move.right) velocity.x += speed * delta;

      controls.moveRight(-velocity.x * delta);
      controls.moveForward(-velocity.z * delta);

      // Nave segue a câmera (posição)
      const camPos = controls.getObject().position;
      ship.position.set(camPos.x, camPos.y - 1, camPos.z);

      renderer.render(scene, camera);
    }
    animate();

    // Ajustar tela ao redimensionar janela
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
